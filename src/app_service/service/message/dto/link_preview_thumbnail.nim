import json, strformat, NimQml, chronicles
include ../../../common/json_utils

QtObject:
  type LinkPreviewThumbnail* = ref object of QObject
    width: int
    height: int
    url: string
    dataUri: string

  proc setup*(self: LinkPreviewThumbnail) =
    self.QObject.setup()

  proc delete*(self: LinkPreviewThumbnail) =
    self.QObject.delete()

  proc update*(self: LinkPreviewThumbnail, width: int, height: int, url: string, dataUri: string)

  proc copy*(self: LinkPreviewThumbnail, other: LinkPreviewThumbnail) =
    if other != nil:
      self.update(other.width, other.height, other.url, other.dataUri)
    else:
      self.update(0, 0, "", "")
    
  proc newLinkPreviewThumbnail*(width: int = 0, height: int = 0, url: string = "", dataUri: string = ""): LinkPreviewThumbnail =
    new(result, delete)
    result.setup()
    result.update(width, height, url, dataUri)

  proc widthChanged*(self: LinkPreviewThumbnail) {.signal.}
  proc getWidth*(self: LinkPreviewThumbnail): int {.slot.} =
    result = self.width
  QtProperty[int] width:
    read = getWidth
    notify = widthChanged

  proc heightChanged*(self: LinkPreviewThumbnail) {.signal.}
  proc getHeight*(self: LinkPreviewThumbnail): int {.slot.} =
    result = self.height
  QtProperty[int] height:
    read = getHeight
    notify = heightChanged

  proc urlChanged*(self: LinkPreviewThumbnail) {.signal.}
  proc getUrl*(self: LinkPreviewThumbnail): string {.slot.} =
    result = self.url
  QtProperty[string] url:
    read = getUrl
    notify = urlChanged

  proc dataUriChanged*(self: LinkPreviewThumbnail) {.signal.}
  proc getDataUri*(self: LinkPreviewThumbnail): string {.slot.} =
    result = self.dataUri
  QtProperty[string] dataUri:
    read = getDataUri
    notify = dataUriChanged


  proc toLinkPreviewThumbnail*(jsonObj: JsonNode): LinkPreviewThumbnail =
    result = LinkPreviewThumbnail()
    discard jsonObj.getProp("width", result.width)
    discard jsonObj.getProp("height", result.height)
    discard jsonObj.getProp("url", result.url)
    discard jsonObj.getProp("dataUri", result.dataUri)

  proc `$`*(self: LinkPreviewThumbnail): string =
    result = fmt"""LinkPreviewThumbnail(
      width: {self.width},
      height: {self.height},
      urlLength: {self.url.len},
      dataUriLength: {self.dataUri.len}
    )"""

  proc `%`*(self: LinkPreviewThumbnail): JsonNode =
    result = %*{
      "width": self.width,
      "height": self.height,
      "url": self.url,
      "dataUri": self.dataUri
    }

  proc update*(self: LinkPreviewThumbnail, width: int, height: int, url: string, dataUri: string) =
    if self.width != width:
      self.width = width
      self.widthChanged()
    if self.height != height:
      self.height = height
      self.heightChanged()
    if self.url != url:
      self.url = url
      self.urlChanged()
    if self.dataUri != dataUri:
      self.dataUri = dataUri
      self.dataUriChanged()

  proc malform*(self: LinkPreviewThumbnail, banner: bool) =
    if banner:
      self.width = 1280
      self.height = 720
      self.url = ""
      self.dataUri = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQAAAALQCAYAAADPfd1WAAAyaklEQVR4nO3de5BeZX3A8d9uLpuQEBJyI0Ak3KpAwaCgguClQinWFmyleKsdR6VWO7Uzaqt12j9aa9sZx8pYtdrqTMfWqZc6ClovgGi9YQ1eAhWqYARMQjY3ErIk2Sy7/eN0h4i57L7nOe973t9+PjM7rbLvc857Qi1+5/ecZ2DdunUTAQAAAACkNNjrGwAAAAAAmiMAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAAAAAAJCYAAgAAAEBiAiAA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AACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIkJgAAAAACQmAAIAAAAAIn9H19A8Pm1u1MvAAAAAElFTkSuQmCC"
    else:
      self.width = 100
      self.height = 100
      self.url = ""
      self.dataUri = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFHklEQVR4nO2cTWtTSxiAn5Q04lejTZqaaqkLP8GNIroQ0ZWiIIpSceNOceFG6NaVKCLi1w8Qf4GKVMSlVKGIFRct1KJWBU1qNWlsiZq2Jnfx3rmTE1O9FU1e6PvAoTNzZk6Sec68M2cONNTX11fCUENDvb+AEcSEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKMOEKCNcl08tleDBA+jpgXQaolFYuxYOH4ZFi3y9Z8/g3j1IpWDePFi5Ejo7IZkMXm96Gk6cgGLRl507B21t/vzx4/5cPA4XL/p8Tw/cuOHz+/bBwYN/6tfOivoIuX0burt9fnRUjqEh6chwGB49guvXfZ0vX2BsDAYG4OxZSCT8uQ8fgjJARDshlWQyMDkJkYhvr4Tah6x8Hu7fl3QkAtu2QUeH5EdH4eFDGUE3b/77DRtg82bYsEHyU1Nw507wmun0j59TrcxRKsHIiM/PaSGplHQqwO7dcOwYnD4tIQng7VvI5eQA2LIFTp6Eri5YtUrK3rwJXtN1/sKFEAoFy2ai/Hy5nDpTeyGfP/u0my/CYVi6VEbD2Bhks75OS4tPx+PyN5MJXtN17vLlsGRJsGwm3PlSSUamEmo/hzQ3+/SLF7Brl6TPnw+WV8Pd/ZXzhbvDEwkvdaa7PhKR+cMJyWZlxM6fD1+/zu63/AVqL2TFCgkt+Tw8fQqDg7B+/f9re+QIHDjgxThc57a2ipDnz6Vzczk/YhzJpIRF18bNH8kkDA//5o/6c9Q+ZEUisGePpEsluHZt5hFRSVOTjILyMJbLwbdvkm5tlcNRLWy5ldfIiHy+E1Lero7U58Fw717YulXShQJcugSvX//etco7PZEIdmy1sOWETE3Bp0++zpwWEgrJ6mrdOskXCnD1qnTQbKkUUv58Um2ENDf7FV067UfIsmWz/+y/QP22TsJhOHUKVq+W/Pg4XLkC37/P7jruDm9qkon5VyErFPJP+qmUbz/nhYDcqV1d0N4u+VQKnjyZuf7du3DhgoQ4R/mEDjJH/Wrp68LWu3fw8SM0NsqyWwG1FzI8LNsm3d0wMSFSOjv9+cHBmdumUrKCGhryZa7Ti0Xo7ZXDbYlks7LErcQJ6e+Xdm65rIDaL3uHh+HWLUlv2gSLF8OaNf58JvPjsrYS13mTk/4h8tUrOcpxWySVe1ouPz4uf5WEK6jHCInFfNpN4vm8L4tGq9cBCS/l13BL15/xs5WWQ5GQ2o+Q9na5w4tF2c3duFHCkKOjQ+aAaFS2WR4/lpFQKMDLl74OBOeIM2f8XNTfD5cv/1jH0dIii4rpackrElL7ERKPw44dkp6YkHcRbi8pFoOdOyVkHTokZcWiPNEPDEi+sRH275e06+xQKLi6Kn9fUk1IQ0NQgpJnEKjX+5CjR6UTenslpDQ1+RdUbkLevh0WLJCt+vfvgy+oXAe6zo7FfLvyfPmeVSVtbbLKAlVCQva/33WhY61n/IcJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUYYJUcY/flt4jhZV+ncAAAAASUVORK5CYII="

